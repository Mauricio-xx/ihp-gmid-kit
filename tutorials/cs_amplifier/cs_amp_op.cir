* IHP SG13G2 CS Amplifier - Operating Point Verification
* Generated by gm/ID design methodology
* Design Parameters:
*   L = 0.130 um
*   W = 0.253 um
*   VGS = 0.5800 V
*   Expected ID = 6.345 uA
*   Expected gm = 62.832 uS

.param W_DESIGN = 2.526345e-07
.param L_DESIGN = 1.300000e-07
.param VGS_OP = 0.5800
.param VDS_OP = 0.60

* Include IHP SG13G2 PDK models
* PDK_ROOT: /home/montanares/git/ihp_pdk/IHP-Open-PDK
.lib '/home/montanares/git/ihp_pdk/IHP-Open-PDK/ihp-sg13g2/libs.tech/ngspice/models/cornerMOSlv.lib' mos_tt

* Voltage sources
VGS gate 0 DC={VGS_OP}
VDS drain 0 DC={VDS_OP}

* NMOS under test
* Terminal order: drain gate source bulk
X1 drain gate 0 0 sg13_lv_nmos L={L_DESIGN} W={W_DESIGN} ng=1 m=1

* Operating point analysis
.op

.control
op
echo "======================================"
echo "Operating Point Results"
echo "======================================"
echo ""
print @n.x1.nsg13_lv_nmos[id]
print @n.x1.nsg13_lv_nmos[gm]
print @n.x1.nsg13_lv_nmos[gds]
print @n.x1.nsg13_lv_nmos[vth]
print @n.x1.nsg13_lv_nmos[vdsat]
echo ""
echo "Expected from gm/ID tables:"
echo "  ID = 6.3450 uA"
echo "  gm = 62.8319 uS"
echo "  gm/ID = 9.90 S/A"
echo "  Av (gm/gds) = 19.29 V/V (25.7 dB)"
echo "======================================"
.endc

.end
